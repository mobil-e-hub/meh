(function(t){function e(e){for(var i,n,r=e[0],l=e[1],c=e[2],u=0,p=[];u<r.length;u++)n=r[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,r=1;r<s.length;r++){var l=s[r];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var i={},a={app:0},o=[];function n(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=i,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("a0aa")},1:function(t,e){},2:function(t,e){},3:function(t,e){},"372d":function(t,e,s){t.exports=s.p+"img/entities.95cf6f1f.svg"},4:function(t,e){},"42a4":function(t,e){t.exports={nodes:{n00:{id:"n00",position:{x:-50,y:50,z:0},type:"parking"},n01:{id:"n01",position:{x:-50,y:-50,z:0},type:"parking"},n02:{id:"n02",position:{x:50,y:-50,z:0},type:"road"},n03:{id:"n03",position:{x:50,y:50,z:0},type:"road"},n04:{id:"n04",position:{x:-50,y:60,z:0},type:"air"},n05:{id:"n05",position:{x:-60,y:60,z:0},type:"air"},n06:{id:"n06",position:{x:-60,y:50,z:0},type:"air"},n07:{id:"n07",position:{x:-60,y:-60,z:0},type:"air"},n08:{id:"n08",position:{x:0,y:0,z:0},type:"road"},n09:{id:"n09",position:{x:50,y:0,z:0},type:"parking"},n10:{id:"n10",position:{x:60,y:0,z:0},type:"air"}},edges:{e00:{id:"e00",from:"n00",to:"n01",type:"road",distance:100},e01:{id:"e01",from:"n01",to:"n02",type:"road",distance:100},e02:{id:"e02",from:"n02",to:"n09",type:"road",distance:50},e10:{id:"e10",from:"n09",to:"n03",type:"road",distance:50},e03:{id:"e03",from:"n03",to:"n00",type:"road",distance:100},e04:{id:"e04",from:"n00",to:"n04",type:"air",distance:10},e05:{id:"e05",from:"n04",to:"n05",type:"air",distance:10},e06:{id:"e06",from:"n05",to:"n06",type:"air",distance:10},e07:{id:"e07",from:"n06",to:"n00",type:"air",distance:10},e08:{id:"e08",from:"n01",to:"n07",type:"air",distance:14},e09:{id:"e09",from:"n07",to:"n01",type:"air",distance:14},e11:{id:"e11",from:"n00",to:"n08",type:"road",distance:71},e12:{id:"e12",from:"n08",to:"n01",type:"road",distance:71},e13:{id:"e13",from:"n08",to:"n09",type:"road",distance:50},e14:{id:"e14",from:"n09",to:"n10",type:"air",distance:10},e15:{id:"e15",from:"n10",to:"n09",type:"air",distance:10}},addresses:{a00:{id:"a00",position:{x:-50,y:55},name:"5 Main St"},a01:{id:"a01",position:{x:0,y:55},name:"10 Main St"},a02:{id:"a02",position:{x:50,y:55},name:"15 Main St"},a03:{id:"a03",position:{x:-50,y:-55},name:"5 Second St"},a04:{id:"a04",position:{x:0,y:-55},name:"10 Second St"},a05:{id:"a05",position:{x:50,y:-55},name:"15 Second St"}},customers:{c00:{id:"c00",name:"Awesome Cake Bakery",address:"a00"},c01:{id:"c01",name:"Miss Scarlett",address:"a02"},c02:{id:"c02",name:"Professor Plum",address:"a04"},c03:{id:"c03",name:"Mrs. Peacock",address:"a03"},c04:{id:"c04",name:"Colonel Mustard",address:"a05"},c05:{id:"c05",name:"CVS Pharmacy",address:"a05"},c06:{id:"c06",name:"Burger King",address:"a05"},c07:{id:"c07",name:"St John's Hospital",address:"a05"}}}},4996:function(t,e,s){s("74ad"),s("8418"),s("9275"),s("d1ec");var i=s("61b2"),a=s("e144"),o=a.v4,n=s("42a4");t.exports={random:{key:function(t){if(t){var e=Object.keys(t);return e[i["int"](0,e.length-1)]}return null},keys:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){for(var a=Object.keys(t),o=[],n=0;n<e&&a.length>0;n++){var r=i["int"](0,a.length-1);o.push(a[r]),s||a.splice(r,1)}return o}return null},value:function(t){if(t){var e=Object.values(t);return e[i["int"](0,e.length-1)]}return null},choice:function(t){return t?t[i["int"](0,t.length-1)]:null},position:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return{x:i["float"](-t,t),y:i["float"](-t,t),z:i["float"](0,t)}},droneHubs:function(){return Object.values(n.nodes).filter((function(t){return"parking"===t["type"]||"parking"===t["type"]}))},rand:i},uuid:function(){return o().substr(0,8)},dist2d:function(t,e){return console.log(t,e),Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},dist3d:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)+Math.pow(t.z-e.z,2))}}},5:function(t,e){},6:function(t,e){},"60a4":function(t,e,s){},7:function(t,e){},8496:function(t,e,s){"use strict";s("60a4")},a0aa:function(t,e,s){"use strict";s.r(e);s("1c75"),s("01bf"),s("3596"),s("acde");var i,a,o,n,r,l,c=s("2b0e"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("b-navbar",{attrs:{fixed:"top",variant:"light"}},[[i("div",{class:{active:this.display.isSidebarVisible},attrs:{id:"burger"},on:{click:function(e){return e.preventDefault(),t.toggleSidebar(e)}}},[t._t("default",[i("button",{staticClass:"burger-button",attrs:{type:"button",title:"Menu"}},[i("span",{staticClass:"hidden"},[t._v("Toggle menu")]),i("span",{staticClass:"burger-bar burger-bar--1"}),i("span",{staticClass:"burger-bar burger-bar--2"}),i("span",{staticClass:"burger-bar burger-bar--3"})])])],2)],i("b-navbar-brand",[t._v(" mobil-e-Hub ")]),i("b-navbar-nav",[i("b-nav-text",[t._v(" Visualization Dashboard ")])],1),i("b-navbar-nav",{staticClass:"ml-auto"},[i("b-nav-form",[i("b-button-toolbar",[i("b-button",{attrs:{variant:"link",title:t.listening?"Stop listening":"Start listening"},on:{click:function(e){t.listening=!t.listening}}},[i("b-icon",{attrs:{icon:"record-circle-fill",variant:t.listening?"danger":"secondary","aria-hidden":"true"}})],1),i("b-button",{attrs:{variant:"link",title:"Start simulation"},on:{click:function(e){return t.$mqtt.publish("start")}}},[i("b-icon",{attrs:{icon:"play-fill","aria-hidden":"true"}})],1),i("b-button",{attrs:{variant:"link",title:"Stop simulation"},on:{click:function(e){return t.$mqtt.publish("stop")}}},[i("b-icon",{attrs:{icon:"stop-fill","aria-hidden":"true"}})],1),i("b-button",{attrs:{variant:"link",title:"Reset simulation"},on:{click:function(e){return t.$mqtt.publish("reset")}}},[i("b-icon",{attrs:{icon:"arrow-counterclockwise","aria-hidden":"true"}})],1),i("b-button",{attrs:{variant:"link",title:"Zoom in"},on:{click:function(e){return t.$store.commit("mapZoom",{factor:1.25})}}},[i("b-icon",{attrs:{icon:"zoom-in","aria-hidden":"true"}})],1),i("b-nav-text",{staticStyle:{"min-width":"50px","text-align":"center"}},[t._v(t._s(Math.round(100*t.$store.state.settings.map.zoom.factor))+"%")]),i("b-button",{attrs:{variant:"link",title:"Zoom out"},on:{click:function(e){return t.$store.commit("mapZoom",{factor:.8})}}},[i("b-icon",{attrs:{icon:"zoom-out","aria-hidden":"true"}})],1),i("b-button",{attrs:{variant:"link",title:"Run test function"},on:{click:t.clickTestButton}},[i("b-icon",{attrs:{icon:"braces","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-send-message",modifiers:{"modal-send-message":!0}}],attrs:{variant:"link",title:"Send message"}},[i("b-icon",{attrs:{icon:"terminal-fill","aria-hidden":"true"}})],1),i("b-modal",{attrs:{id:"modal-send-message",title:"Send message"},on:{ok:t.clickSendButton}},[i("b-form-group",{attrs:{label:"Sender","label-for":"input-message-sender"}},[i("b-form-input",{attrs:{id:"input-message-sender",placeholder:"from/visualization/..."},model:{value:t.command.message.sender,callback:function(e){t.$set(t.command.message,"sender",e)},expression:"command.message.sender"}})],1),i("b-form-group",{attrs:{label:"Topic","label-for":"input-message-topic"}},[i("b-form-input",{attrs:{id:"input-message-topic",placeholder:"status",required:""},model:{value:t.command.message.topic,callback:function(e){t.$set(t.command.message,"topic",e)},expression:"command.message.topic"}})],1),i("b-form-group",{attrs:{label:"Message","label-for":"input-message-message"}},[i("b-form-input",{attrs:{id:"input-message-message",placeholder:"{ data: 'Hello World' }",required:""},model:{value:t.command.message.message,callback:function(e){t.$set(t.command.message,"message",e)},expression:"command.message.message"}})],1)],1),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-place-order",modifiers:{"modal-place-order":!0}}],attrs:{variant:"link",title:"Place order"}},[i("b-icon",{attrs:{icon:"bag-plus-fill","aria-hidden":"true"}})],1),i("b-modal",{attrs:{id:"modal-place-order",title:"Place order"},on:{ok:t.clickPlaceOrderButton}})],1)],1)],1)],2),i("b-container",{staticClass:"my-5",attrs:{fluid:""}},[i("b-row",{staticClass:"pt-4"},[i("b-col",{attrs:{cols:"12"}},["simulation"===t.view?i("div",[[i("div",{staticClass:"sidebar"},[this.display.isSidebarVisible?i("div",{staticClass:"sidebar-backdrop",on:{click:t.toggleSidebar}}):t._e(),i("transition",{attrs:{name:"slide"}},[this.display.isSidebarVisible?i("div",{staticClass:"sidebar-panel mt-lg-4"},[i("label",{staticClass:"mt-md-2 mb-auto"},[i("u",[t._v(" Settings: ")])]),i("ul",[i("li",[[i("label",{staticClass:"toggle__button",class:{active:this.display.statsTableVisible},attrs:{for:"toggle_stats_btn"}},[i("span",{staticClass:"toggle__label"},[t._v(" Stats: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.toggleStatsTable,expression:"toggleStatsTable"}],attrs:{type:"checkbox",id:"toggle_stats_btn"},domProps:{checked:Array.isArray(t.toggleStatsTable)?t._i(t.toggleStatsTable,null)>-1:t.toggleStatsTable},on:{change:function(e){var s=t.toggleStatsTable,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);i.checked?n<0&&(t.toggleStatsTable=s.concat([o])):n>-1&&(t.toggleStatsTable=s.slice(0,n).concat(s.slice(n+1)))}else t.toggleStatsTable=a}}}),i("span",{staticClass:"mr-auto toggle__switch"})])]],2),i("li",[[i("label",{staticClass:"toggle__button",class:{active:this.display.areToastsEnabled},attrs:{for:"toggle_toast_btn"}},[i("span",{staticClass:"toggle__label"},[t._v(" Toasts: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.toggleToasts,expression:"toggleToasts"}],attrs:{type:"checkbox",id:"toggle_toast_btn"},domProps:{checked:Array.isArray(t.toggleToasts)?t._i(t.toggleToasts,null)>-1:t.toggleToasts},on:{change:function(e){var s=t.toggleToasts,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);i.checked?n<0&&(t.toggleToasts=s.concat([o])):n>-1&&(t.toggleToasts=s.slice(0,n).concat(s.slice(n+1)))}else t.toggleToasts=a}}}),i("span",{staticClass:"ml-auto toggle__switch"})])],i("ul",[i("li",[i("label",{attrs:{for:"checkbox_status"}},[t._v("Status ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:this.display.enabledToastTypes,expression:"this.display.enabledToastTypes"}],staticClass:"float-right",attrs:{type:"checkbox",id:"checkbox_status",value:"status",disabled:!this.display.areToastsEnabled},domProps:{checked:Array.isArray(this.display.enabledToastTypes)?t._i(this.display.enabledToastTypes,"status")>-1:this.display.enabledToastTypes},on:{change:function(e){var s=this.display.enabledToastTypes,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="status",n=t._i(s,o);i.checked?n<0&&t.$set(this.display,"enabledToastTypes",s.concat([o])):n>-1&&t.$set(this.display,"enabledToastTypes",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(this.display,"enabledToastTypes",a)}}})]),i("li",[i("label",{attrs:{for:"checkbox_routing"}},[t._v("Routing")]),i("input",{directives:[{name:"model",rawName:"v-model",value:this.display.enabledToastTypes,expression:"this.display.enabledToastTypes"}],staticClass:"float-right",attrs:{type:"checkbox",id:"checkbox_routing",value:"routing",disabled:!this.display.areToastsEnabled},domProps:{checked:Array.isArray(this.display.enabledToastTypes)?t._i(this.display.enabledToastTypes,"routing")>-1:this.display.enabledToastTypes},on:{change:function(e){var s=this.display.enabledToastTypes,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="routing",n=t._i(s,o);i.checked?n<0&&t.$set(this.display,"enabledToastTypes",s.concat([o])):n>-1&&t.$set(this.display,"enabledToastTypes",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(this.display,"enabledToastTypes",a)}}})]),i("li",[i("label",{attrs:{for:"checkbox_mission"}},[t._v("Missions")]),i("input",{directives:[{name:"model",rawName:"v-model",value:this.display.enabledToastTypes,expression:"this.display.enabledToastTypes"}],staticClass:"float-right",attrs:{type:"checkbox",id:"checkbox_mission",value:"mission",disabled:!this.display.areToastsEnabled},domProps:{checked:Array.isArray(this.display.enabledToastTypes)?t._i(this.display.enabledToastTypes,"mission")>-1:this.display.enabledToastTypes},on:{change:function(e){var s=this.display.enabledToastTypes,i=e.target,a=!!i.checked;if(Array.isArray(s)){var o="mission",n=t._i(s,o);i.checked?n<0&&t.$set(this.display,"enabledToastTypes",s.concat([o])):n>-1&&t.$set(this.display,"enabledToastTypes",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(this.display,"enabledToastTypes",a)}}})])])],2)])]):t._e()])],1)],i("b-container",{attrs:{fluid:""}},[i("b-row",[i("b-col",{attrs:{cols:"9"}},[i("svg",{ref:"svg",attrs:{width:"100%",height:"85vh",xmlns:"http://www.w3.org/2000/svg"},on:{wheel:function(e){return e.preventDefault(),t.onMouseWheelMap(e)},mousedown:function(e){return e.preventDefault(),t.onMouseDownMap(e)},mousemove:function(e){return e.preventDefault(),t.onMouseMoveMap(e)},mouseup:function(e){return e.preventDefault(),t.onMouseUpMap(e)}}},[t._l(t.$store.state.topology.nodes,(function(t,e){return i("node",{key:e,attrs:{id:e}})})),t._l(t.$store.state.topology.edges,(function(t,e){return i("edge",{key:e,attrs:{id:e}})})),t._l(t.$store.state.entities.hubs,(function(t,e){return i("hub",{key:e,attrs:{id:e}})})),t._l(t.entities.cars,(function(e,a){return i("use",{key:a,attrs:{x:e.cx-e.width/2,y:e.cy-e.height/2,width:e.width,height:e.height,fill:e.fill,href:s("372d")+"#car-symbol",transform:"scale(1, -1)"}},[i("title",[t._v("Car "+t._s(a)+" ("+t._s(e.state)+")")])])})),t._l(t.entities.buss,(function(e,a){return i("use",{key:a,attrs:{x:e.position.x-t.entitySize.bus+2,y:-e.position.y-t.entitySize.bus+3,width:2*t.entitySize.bus,height:2*t.entitySize.bus,href:s("372d")+"#bus-symbol",fill:"blue",transform:"scale(1, -1)"}},[i("title",[t._v("Bus "+t._s(e.id)+" ("+t._s(e.state)+")")])])})),t._l(t.$store.state.entities.drones,(function(t,e){return i("drone",{key:e,attrs:{id:e}})})),t._l(t.lodash.pickBy(t.entities.parcels,(function(t,e){return null!==t.cx})),(function(t,e){return i("use",{directives:[{name:"b-popover",rawName:"v-b-popover.hover.right",value:"Parcel "+e+" (Source: "+t.carrier.id+", Destination: "+t.destination.id+")",expression:"`Parcel ${id} (Source: ${parcel.carrier.id}, Destination: ${parcel.destination.id})`",modifiers:{hover:!0,right:!0}}],key:e,attrs:{x:t.cx-t.width/2,y:t.cy-t.height/2,width:t.width,height:t.height,fill:t.fill,href:s("372d")+"#parcel-symbol",transform:"scale(1, -1)",title:"Parcel details"}})}))],2)]),i("b-col",{attrs:{cols:"3"}},[t.display.statsTableVisible?[i("div",{staticClass:"card",staticStyle:{width:"22rem"}},[i("div",{staticClass:"card-header"},[i("b",[t._v("Statistics (Dummy)")])]),i("table",{staticClass:"card-table table"},[i("thead",[i("tr",[i("th",{attrs:{scope:"col"}},[t._v("Entity")]),i("th",{attrs:{scope:"col"}},[t._v("Engaged")]),i("th",{attrs:{scope:"col"}},[t._v("Avg. wait (?)")])])]),i("tbody",[i("tr",[i("td",[t._v("Drones")]),i("td",[t._v(" _x / "+t._s(Object.keys(t.entities.drones).length))]),i("td",[t._v("_10 min")])]),i("tr",[i("td",[t._v("Cars")]),i("td",[t._v(" _x / "+t._s(Object.keys(t.entities.cars).length))]),i("td",[t._v("_20 min")])]),i("tr",[i("td",[t._v("Buses")]),i("td",[t._v(" _x / "+t._s(Object.keys(t.entities.buss).length))]),i("td",[t._v("_50 min")])]),i("tr",[i("td",[t._v(" Parcel "),i("b-badge",{staticClass:"badge-circle badge-md badge-floating border-white",attrs:{variant:"info"}},[t._v("transit")])],1),i("td",[t._v(" _"+t._s(Object.keys(t.entities.parcels).length)+" ")]),i("td",[t._v("_42 min")])]),i("tr",[i("td",[t._v("Parcel "),i("b-badge",{staticClass:"badge-circle badge-md badge-floating border-white",attrs:{variant:"success"}},[t._v("done")])],1),i("td",[t._v(" _"+t._s(Object.keys(t.entities.parcels).length)+" ")]),i("td",[t._v("_2 h")])])])])])]:t._e()],2)],1)],1)],2):"messages"===t.view?i("messages",{attrs:{messages:t.messages.messages}}):"entities"===t.view?i("entities"):"settings"===t.view?i("settings"):t._e()],1)],1)],1),i("b-navbar",{attrs:{fixed:"bottom",variant:"light"}},[i("b-navbar-nav",{staticClass:"mx-auto"},[t.listening?i("b-nav-text",{staticClass:"mx-3"},[t._v(t._s(t.incomingMessageCounter))]):t._e(),i("b-nav-text",{staticClass:"mx-2",attrs:{title:"Number of hubs"}},[i("font-awesome-icon",{staticStyle:{color:"gray"},attrs:{icon:"warehouse"}}),t._v(": "+t._s(Object.keys(t.entities.hubs).length)+" ")],1),i("b-nav-text",{staticClass:"mx-3",attrs:{title:"Number of drones"}},[i("font-awesome-icon",{staticStyle:{color:"red"},attrs:{icon:"plane"}}),t._v(": "+t._s(Object.keys(t.entities.drones).length)+" ")],1),i("b-nav-text",{staticClass:"mx-3",attrs:{title:"Number of cars"}},[i("font-awesome-icon",{staticStyle:{color:"blue"},attrs:{icon:"car"}}),t._v(": "+t._s(Object.keys(t.entities.cars).length)+" ")],1),i("b-nav-text",{staticClass:"mx-3",attrs:{title:"Number of busses"}},[i("font-awesome-icon",{staticStyle:{color:"blue"},attrs:{icon:"bus"}}),t._v(": "+t._s(Object.keys(t.entities.buss).length)+" ")],1),i("b-nav-text",{staticClass:"mx-3",attrs:{title:"Number of parcels"}},[i("font-awesome-icon",{staticStyle:{color:"green"},attrs:{icon:"archive"}}),t._v(": "+t._s(Object.keys(t.entities.parcels).length)+" ")],1)],1)],1),i("b-button",{staticClass:"floating",staticStyle:{bottom:"220px"},attrs:{variant:"simulation"===t.view?"primary":"",title:"Map View"},on:{click:function(e){t.view="simulation"}}},[i("b-icon",{attrs:{icon:"map","aria-hidden":"true"}})],1),i("b-button",{staticClass:"floating",staticStyle:{bottom:"160px"},attrs:{variant:"messages"===t.view?"primary":"",title:"Messages View"},on:{click:function(e){t.view="messages"}}},[i("b-icon",{attrs:{icon:"chat-left-text","aria-hidden":"true"}})],1),i("b-button",{staticClass:"floating",staticStyle:{bottom:"100px"},attrs:{variant:"entities"===t.view?"primary":"",title:"Entities View"},on:{click:function(e){t.view="entities"}}},[i("b-icon",{attrs:{icon:"clipboard-data","aria-hidden":"true"}})],1),i("b-button",{staticClass:"floating",staticStyle:{bottom:"40px"},attrs:{variant:"settings"===t.view?"primary":"",title:"Settings View"},on:{click:function(e){t.view="settings"}}},[i("b-icon",{attrs:{icon:"gear-fill","aria-hidden":"true"}})],1)],1)},u=[],p=(s("ef44"),s("cf78"),s("9a67"),s("4cdd"),s("8a24"),s("11d4"),s("f1e9"),s("6db3"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"mb-5"},[t._v("Messages")]),s("pre",{staticStyle:{"max-height":"70vh","overflow-y":"scroll","white-space":"pre-wrap","word-break":"keep-all"}},[t._v(t._s(t.messages.slice(0,100).map((function(t){return t.timestamp+" "+t.topic.string.short+": "+JSON.stringify(t.message)})).join("\n\n")))])])}),m=[],b={name:"Messages",props:{messages:Array},data:function(){return{}},computed:{}},h=b,g=s("4f4e"),f=Object(g["a"])(h,p,m,!1,null,null,null),y=f.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"mb-5"},[t._v("Entities")]),s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",[s("h4",[t._v("Hubs")]),s("b-list-group",t._l(t.$store.state.entities.hubs,(function(e,i){return s("b-list-group-item",{key:i},[t._v(t._s(i))])})),1)],1),s("b-col",[s("h4",[t._v("Drones")]),s("b-list-group",t._l(t.$store.state.entities.drones,(function(e,i){return s("b-list-group-item",{key:i},[t._v(t._s(i))])})),1)],1),s("b-col",[s("h4",[t._v("Cars")]),s("b-list-group",t._l(t.$store.state.entities.cars,(function(e,i){return s("b-list-group-item",{key:i},[t._v(t._s(i))])})),1)],1),s("b-col",[s("h4",[t._v("Buses")]),s("b-list-group",t._l(t.$store.state.entities.buss,(function(e,i){return s("b-list-group-item",{key:i},[t._v(t._s(i))])})),1)],1),s("b-col",[s("h4",[t._v("Parcels")]),s("b-list-group",t._l(t.$store.state.entities.parcels,(function(e,i){return s("b-list-group-item",{key:i},[t._v(t._s(i))])})),1)],1)],1)],1)],1)},_=[],x={name:"Entities",data:function(){return{}},computed:{}},k=x,T=Object(g["a"])(k,v,_,!1,null,null,null),$=T.exports,w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"mb-5"},[t._v("Settings")]),s("b-container",{attrs:{fluid:""}},[s("b-row",{staticClass:"my-4"},[s("b-col",[s("h5",[t._v("Display")]),s("b-form-checkbox",{attrs:{id:"checkbox-zoom-entities"},model:{value:t.$store.state.settings.map.zoom.entities,callback:function(e){t.$set(t.$store.state.settings.map.zoom,"entities",e)},expression:"$store.state.settings.map.zoom.entities"}},[t._v(" Zoom entity sizes ")]),s("b-form-checkbox",{attrs:{id:"checkbox-zoom-topology"},model:{value:t.$store.state.settings.map.zoom.topology,callback:function(e){t.$set(t.$store.state.settings.map.zoom,"topology",e)},expression:"$store.state.settings.map.zoom.topology"}},[t._v(" Zoom node/edge sizes ")])],1)],1),s("b-row",{staticClass:"my-4"},[s("b-col",[s("h5",[t._v("MQTT Broker")]),s("div",[s("b-form-group",{attrs:{label:"Broker URL:","label-for":"input-mqtt-broker"}},[s("b-form-input",{attrs:{id:"input-mqtt-broker",type:"url",placeholder:"Enter URL",required:""},model:{value:t.$mqtt.broker,callback:function(e){t.$set(t.$mqtt,"broker",e)},expression:"$mqtt.broker"}})],1),s("b-form-group",{attrs:{label:"Message Prefix:","label-for":"input-mqtt-prefix"}},[s("b-form-input",{attrs:{id:"input-mqtt-prefix",placeholder:"Enter prefix",required:""},model:{value:t.$mqtt.root,callback:function(e){t.$set(t.$mqtt,"root",e)},expression:"$mqtt.root"}})],1)],1)])],1)],1)],1)},S=[],z={name:"Settings",data:function(){return{}},computed:{}},C=z,M=Object(g["a"])(C,w,S,!1,null,null,null),O=M.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.node?s("circle",{attrs:{r:t.r,cx:t.displayPosition.cx,cy:t.displayPosition.cy,fill:"lightgray"}},[s("title",[t._v("Node "+t._s(t.node.id)+" ("+t._s(t.node.type)+")")])]):t._e()},j=[],q=(s("42a4"),{name:"Node",props:{id:String},data:function(){return{}},computed:{node:function(){return this.$store.state.topology.nodes[this.id]},r:function(){return this.$store.state.settings.map.displaySize.node*(this.$store.state.settings.map.zoom.topology?this.$store.state.settings.map.zoom.factor:1)},position:function(){return this.node?{cx:this.node.position.x,cy:this.node.position.y}:null},displayPosition:function(){return this.position?{cx:this.position.cx*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.x,cy:-this.position.cy*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.y}:null}}}),E=q,D=Object(g["a"])(E,P,j,!1,null,null,null),A=D.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.edge?s("line",{attrs:{x1:t.displayPosition.x1,y1:t.displayPosition.y1,x2:t.displayPosition.x2,y2:t.displayPosition.y2,stroke:"lightgray","stroke-width":t.width,"stroke-dasharray":t.dash}}):t._e()},V=[],B=(s("42a4"),{name:"Edge",props:{id:String},data:function(){return{}},computed:{edge:function(){return this.$store.state.topology.edges[this.id]},from:function(){return this.edge?this.$store.state.topology.nodes[this.edge.from]:null},to:function(){return this.edge?this.$store.state.topology.nodes[this.edge.to]:null},width:function(){return this.$store.state.settings.map.displaySize.edge*(this.$store.state.settings.map.zoom.topology?this.$store.state.settings.map.zoom.factor:1)},dash:function(){return"air"===this.edge.type?1:""},position:function(){return this.from&&this.to?{x1:this.from.position.x,y1:this.from.position.y,x2:this.to.position.x,y2:this.to.position.y}:null},displayPosition:function(){return this.position?{x1:this.position.x1*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.x,y1:-this.position.y1*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.y,x2:this.position.x2*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.x,y2:-this.position.y2*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.y}:null}}}),H=B,R=Object(g["a"])(H,N,V,!1,null,null,null),J=R.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.hub&&t.node?i("use",{attrs:{x:t.displayPosition.x,y:t.displayPosition.y,width:t.size,height:t.size,href:s("372d")+"#hub-symbol",fill:t.fill}},[i("title",[t._v("Hub "+t._s(t.hub.id)+" (Parcels: "+t._s(Object.keys(t.hub.parcels).length)+")")])]):t._e()},Z=[],X=(s("42a4"),{name:"Hub",props:{id:String},data:function(){return{}},computed:{hub:function(){return this.$store.state.entities.hubs[this.id]},node:function(){return this.$store.state.topology.nodes[this.hub.position]},size:function(){return this.$store.state.settings.map.displaySize.hub*(this.$store.state.settings.map.zoom.entities?this.$store.state.settings.map.zoom.factor:1)},fill:function(){return"green"},position:function(){return this.node?{cx:this.node.position.x,cy:this.node.position.y}:null},displayPosition:function(){return this.position?{x:this.position.cx*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.x-this.size/2,y:-this.position.cy*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.y-this.size/2}:null}}}),W=X,I=Object(g["a"])(W,Y,Z,!1,null,null,null),U=I.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.drone?i("use",{attrs:{x:t.displayPosition.x,y:t.displayPosition.y,width:t.size,height:t.size,href:s("372d")+"#drone-symbol",fill:"red"}}):t._e()},K=[],Q=(s("42a4"),{name:"Drone",props:{id:String},data:function(){return{}},computed:{drone:function(){return this.$store.state.entities.drones[this.id]},size:function(){return this.$store.state.settings.map.displaySize.drone*(this.$store.state.settings.map.zoom.entities?this.$store.state.settings.map.zoom.factor:1)},position:function(){return this.drone?{cx:this.drone.position.x,cy:this.drone.position.y}:null},displayPosition:function(){return this.position?{x:this.position.cx*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.x-this.size/2,y:-this.position.cy*this.$store.state.settings.map.zoom.factor+this.$store.state.settings.map.origin.y-this.size/2}:null}}}),F=Q,G=Object(g["a"])(F,L,K,!1,null,null,null),tt=G.exports,et={},st=Object(g["a"])(et,i,a,!1,null,null,null),it=(st.exports,{}),at=Object(g["a"])(it,o,n,!1,null,null,null),ot=(at.exports,{}),nt=Object(g["a"])(ot,r,l,!1,null,null,null),rt=(nt.exports,s("4996").uuid),lt=s("2ef0"),ct={data:function(){return{lodash:lt,listening:!0,view:"simulation",messages:{messages:[],counterInterval:10},entities:{raw:{drones:{},cars:{},parcels:{},hubs:{}},drones:{},cars:{},buss:{},parcels:{},hubs:{}},map:{drag:{isDragging:!1,x:0,y:0}},display:{isSidebarVisible:!1,areToastsEnabled:!0,enabledToastTypes:["status"],statsTableVisible:!1},stats:{waitingDrones:0,avgDroneWaitTime:0,waitingCars:0},command:{message:{topic:null,message:null,sender:null},order:{vendor:null,customer:null,pickup:null,dropoff:null}},currentTime:Date.now()}},components:{Messages:y,Entities:$,Settings:O,Node:A,Edge:J,Hub:U,Drone:tt},created:function(){var t=this;this.$mqtt.subscribe("#",(function(e,s,i){return t.messages.messages.unshift({topic:e,message:s,timestamp:i.timestamp})})),this.$mqtt.subscribe("from/+/+/state",(function(e,s){return t.$store.commit("updateEntityState",{type:e.entity,id:e.id,payload:s})})),this.$mqtt.subscribe("to/drone/+/tasks",(function(e,s){return t.showToastRouting("Task assigned","Drone ".concat(e.id," has been assigned a new task."))})),this.$mqtt.subscribe("from/parcel/+/placed",(function(e,s){return t.showToastStatus("Order placed","Parcel ".concat(e.id," has been placed at hub ").concat(s.carrier.id," with destination ").concat(s.destination.id,"."))})),this.$mqtt.subscribe("from/control-system/+/route-update",(function(e,s){return t.showToastRouting("Route update","Control System ".concat(e.id," has updated the routes."))})),this.$mqtt.subscribe("from/car/+/arrived",(function(e,s){return t.showToastStatus("Car arrived","Car ".concat(e.id," has arrived at node ").concat(s,"."))})),this.$mqtt.subscribe("from/+/+/mission/+/complete",(function(e,s){return t.showToastStatus("Mission complete","".concat(e.entity," ").concat(e.id," has completed mission ").concat(e.args[1],"."))})),this.$mqtt.subscribe("from/+/+/transaction/+/complete",(function(e,s){return t.showToastStatus("Transaction complete","".concat(e.entity," ").concat(e.id," has completed transaction ").concat(e.args[1],"."))})),this.$mqtt.subscribe("from/parcel/+/delivered",(function(e,s){return t.showToastStatus("Parcel delivered","Parcel ".concat(e.id," has reached its destination ").concat(s.destination.id,"."))})),this.$mqtt.subscribe("to/visualization/#",(function(e,s){return t.showToastStatus("Message received","".concat(e.string["short"],": ").concat(JSON.stringify(s)))}))},mounted:function(){var t=this;setInterval((function(){t.currentTime=Date.now()}),1e3),this.$store.commit("mapSetOrigin",{x:this.$refs.svg.clientWidth/2,y:this.$refs.svg.clientHeight/2})},methods:{onMouseWheelMap:function(t){this.$store.commit("mapZoom",{factor:t.deltaY>0?1/1.05:1.05})},onMouseDownMap:function(t){this.map.drag.x=t.offsetX,this.map.drag.y=t.offsetY,this.map.drag.isDragging=!0},onMouseMoveMap:function(t){this.map.drag.isDragging&&(this.$store.commit("mapMove",{offsetX:t.offsetX-this.map.drag.x,offsetY:t.offsetY-this.map.drag.y}),this.map.drag.x=t.offsetX,this.map.drag.y=t.offsetY)},onMouseUpMap:function(t){this.$store.commit("mapMove",{offsetX:t.offsetX-this.map.drag.x,offsetY:t.offsetY-this.map.drag.y}),this.map.drag.isDragging=!1},showToastStatus:function(t,e){this.display.enabledToastTypes.includes("status")&&this.showToast(t,e)},showToastRouting:function(t,e){this.display.enabledToastTypes.includes("routing")&&this.showToast(t,e)},showToast:function(t,e){this.display.areToastsEnabled&&this.$bvToast.toast(e,{title:t,autoHideDelay:3e3,toaster:"b-toaster-bottom-left"})},clickSendButton:function(){this.$mqtt.publish(this.command.message.topic,JSON.stringify(this.command.message.message),this.command.message.sender)},clickTestButton:function(){this.$mqtt.publish("bla","hello")},clickPlaceOrderButton:function(){this.$mqtt.publish("place-order",{id:rt(),vendor:{type:"customer",id:this.command.order.vendor},customer:{type:"customer",id:this.command.order.customer},pickup:this.command.order.pickup,dropoff:this.command.order.dropoff})},toggleSidebar:function(){this.display.isSidebarVisible=!this.display.isSidebarVisible}},computed:{toggleStatsTable:{get:function(){return this.display.statsTableVisible},set:function(t){this.display.statsTableVisible=t,this.$emit("change",t)}},toggleToasts:{get:function(){return this.display.areToastsEnabled},set:function(t){this.display.areToastsEnabled=t,this.$emit("change",t)}},incomingMessageCounter:function(){var t=this,e=this.messages.messages.reduce((function(e,s){return e+(t.currentTime-s.timestamp<=1e3*t.messages.counterInterval?1:0)}),0);return e>0?"".concat(e/this.messages.counterInterval," messages per second"):"No messages incoming"}}},dt=ct,ut=(s("8496"),Object(g["a"])(dt,d,u,!1,null,null,null)),pt=ut.exports,mt=s("2f62"),bt=s("42a4"),ht=s.n(bt);c["default"].use(mt["a"]);var gt={drone:"drones",car:"cars",bus:"buses",parcel:"parcels",hub:"hubs",address:"addresses"},ft=new mt["a"].Store({state:{entities:{drones:{},cars:{},buses:{},parcels:{},hubs:{},addresses:{}},topology:ht.a,settings:{map:{origin:{x:0,y:0},zoom:{factor:4,entities:!0,topology:!0},displaySize:{hub:10,drone:5,car:20,bus:10,parcel:12,node:2,edge:1,address:7}}}},getters:{},mutations:{updateEntityState:function(t,e){var s=e.type,i=e.id,a=e.payload;c["default"].set(t.entities[gt[s]],i,a)},mapZoom:function(t,e){var s=e.factor;t.settings.map.zoom.factor*=s},mapMove:function(t,e){var s=e.offsetX,i=e.offsetY;t.settings.map.origin.x+=s,t.settings.map.origin.y+=i},mapSetOrigin:function(t,e){var s=e.x,i=e.y;t.settings.map.origin.x=s,t.settings.map.origin.y=i}}}),yt=s("a74d"),vt=s("e39f"),_t=(s("9dce"),s("e171"),s("02ec"),s("3513"),s("7dba"),s("bccc"),s("785a"),s("e7fc")),xt=s("c052"),kt=(s("2ef0"),s("4996").uuid),Tt={install:function(t,e){var s=kt(),i=_t.connect(e.broker),a={};i.on("connect",(function(){i.subscribe("".concat(e.root,"/#"))})),i.on("message",(function(t,e){var s=t.split("/"),i=Object(vt["a"])(s),o=(i[0],i[1]),n=i[2],r=i[3],l=i[4],c=i.slice(5);t={version:o,direction:n,entity:r,id:l,args:c,rest:c.join("/"),string:{long:t,short:"".concat(n,"/").concat(r,"/").concat(l,"/").concat(c.join("/"))}},e=JSON.parse(e.toString());for(var d=0,u=Object.entries(a);d<u.length;d++){var p=Object(yt["a"])(u[d],2),m=p[0],b=p[1];xt(m,t.string["short"])&&b(t,e,{timestamp:Date.now()})}})),t.prototype.$mqtt={broker:e.broker,root:e.root,publish:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"from/visualization/".concat(s);i.publish("".concat(e.root,"/").concat(o,"/").concat(t),JSON.stringify(a))},subscribe:function(t,e){a[t]=e},unsubscribe:function(t){delete a[t]}}}},$t=s("5f5b"),wt=s("b1e0");s("f9e3"),s("2dd8");c["default"].use($t["a"]),c["default"].use(wt["a"]),c["default"].config.productionTip=!1,c["default"].use(Tt,{broker:"ws://broker.hivemq.com:8000/mqtt",root:"mobil-e-hub/viz"}),new c["default"]({render:function(t){return t(pt)},store:ft}).$mount("#app")}});
//# sourceMappingURL=app.001058c3.js.map